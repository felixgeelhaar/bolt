{{/* Bolt Logging Library Alert Templates */}}

{{/* Critical Alert Template */}}
{{ define "bolt.critical.title" }}
üî¥ CRITICAL: Bolt Logging - {{ .GroupLabels.alertname }}
{{ end }}

{{ define "bolt.critical.text" }}
**‚ö†Ô∏è CRITICAL BOLT LOGGING ALERT**

{{ if gt (len .Alerts.Firing) 0 }}
**üî• Firing Alerts ({{ len .Alerts.Firing }}):**
{{ range .Alerts.Firing }}
---
**Alert:** {{ .Annotations.summary }}
**Description:** {{ .Annotations.description }}
**Instance:** `{{ .Labels.instance }}`
**Component:** {{ .Labels.component }}
**Category:** {{ .Labels.category }}
**Started:** {{ .StartsAt.Format "2006-01-02 15:04:05 UTC" }}
{{ if .Annotations.runbook_url }}**üìñ Runbook:** {{ .Annotations.runbook_url }}{{ end }}
{{ if .Annotations.dashboard_url }}**üìä Dashboard:** {{ .Annotations.dashboard_url }}{{ end }}

**Current Value:** {{ with .Annotations.value }}{{ . }}{{ else }}N/A{{ end }}
{{ end }}
{{ end }}

{{ if gt (len .Alerts.Resolved) 0 }}
**‚úÖ Resolved Alerts ({{ len .Alerts.Resolved }}):**
{{ range .Alerts.Resolved }}
- {{ .Annotations.summary }} ({{ .StartsAt.Format "15:04" }} - {{ .EndsAt.Format "15:04" }})
{{ end }}
{{ end }}

**üéØ Action Required:** Immediate investigation and response required for critical performance issues.
{{ end }}

{{/* Warning Alert Template */}}
{{ define "bolt.warning.title" }}
‚ö†Ô∏è WARNING: Bolt Logging - {{ .GroupLabels.alertname }}
{{ end }}

{{ define "bolt.warning.text" }}
**‚ö†Ô∏è BOLT LOGGING WARNING**

{{ range .Alerts.Firing }}
**Alert:** {{ .Annotations.summary }}
**Description:** {{ .Annotations.description }}
**Instance:** `{{ .Labels.instance }}`
**Started:** {{ .StartsAt.Format "2006-01-02 15:04:05 UTC" }}
**Current Value:** {{ with .Annotations.value }}{{ . }}{{ else }}N/A{{ end }}

{{ if .Annotations.runbook_url }}**üìñ Runbook:** {{ .Annotations.runbook_url }}{{ end }}
{{ end }}

**üìã Suggested Actions:**
- Monitor performance metrics closely
- Review application logs for anomalies
- Consider scaling resources if needed
{{ end }}

{{/* Performance Alert Template */}}
{{ define "bolt.performance.title" }}
üöÄ PERFORMANCE: Bolt Logging - {{ .GroupLabels.alertname }}
{{ end }}

{{ define "bolt.performance.text" }}
**üöÄ BOLT PERFORMANCE ALERT**

{{ range .Alerts.Firing }}
**Performance Issue:** {{ .Annotations.summary }}
**Details:** {{ .Annotations.description }}
**Instance:** `{{ .Labels.instance }}`
**Metric Value:** {{ .Annotations.value }}
**Threshold:** {{ .Annotations.threshold }}
**Duration:** {{ .StartsAt.Format "15:04:05" }} UTC

{{ if eq .Labels.category "performance" }}
**üìä Performance Impact:**
- Latency: {{ with .Annotations.current_latency }}{{ . }}{{ else }}Unknown{{ end }}
- Throughput: {{ with .Annotations.current_throughput }}{{ . }}{{ else }}Unknown{{ end }}
- Error Rate: {{ with .Annotations.current_error_rate }}{{ . }}{{ else }}Unknown{{ end }}
{{ end }}

{{ if .Annotations.runbook_url }}**üîß Troubleshooting Guide:** {{ .Annotations.runbook_url }}{{ end }}
{{ end }}

**‚ö° Performance Standards:**
- Target Latency: <100Œºs (p95)
- Zero Allocations: Required
- Error Rate: <1%
{{ end }}

{{/* Capacity Alert Template */}}
{{ define "bolt.capacity.title" }}
üìà CAPACITY: Bolt Resource Usage - {{ .GroupLabels.alertname }}
{{ end }}

{{ define "bolt.capacity.text" }}
**üìà BOLT CAPACITY ALERT**

{{ range .Alerts.Firing }}
**Resource Alert:** {{ .Annotations.summary }}
**Details:** {{ .Annotations.description }}
**Current Usage:** {{ .Annotations.value }}
**Instance:** `{{ .Labels.instance }}`
**Time:** {{ .StartsAt.Format "2006-01-02 15:04:05 UTC" }}

{{ if eq .Labels.category "capacity" }}
**üìä Resource Status:**
- Memory Usage: {{ with .Annotations.memory_usage }}{{ . }}{{ else }}Unknown{{ end }}
- CPU Usage: {{ with .Annotations.cpu_usage }}{{ . }}{{ else }}Unknown{{ end }}
- Disk Space: {{ with .Annotations.disk_space }}{{ . }}{{ else }}Unknown{{ end }}
- Event Pool: {{ with .Annotations.event_pool_status }}{{ . }}{{ else }}Unknown{{ end }}
{{ end }}
{{ end }}

**üìã Capacity Planning:**
- Review resource allocation
- Consider horizontal scaling
- Analyze usage trends
- Update capacity thresholds
{{ end }}

{{/* Business Alert Template */}}
{{ define "bolt.business.title" }}
üìä BUSINESS: Bolt Metrics - {{ .GroupLabels.alertname }}
{{ end }}

{{ define "bolt.business.text" }}
**üìä BOLT BUSINESS METRICS ALERT**

{{ range .Alerts.Firing }}
**Business Impact:** {{ .Annotations.summary }}
**Details:** {{ .Annotations.description }}
**Metric Value:** {{ .Annotations.value }}
**Instance:** `{{ .Labels.instance }}`

{{ if eq .Labels.category "business" }}
**üìà Business Metrics:**
- Error Log Ratio: {{ with .Annotations.error_ratio }}{{ . }}{{ else }}Unknown{{ end }}
- Log Volume: {{ with .Annotations.log_volume }}{{ . }}{{ else }}Unknown{{ end }}
- Application Health: {{ with .Annotations.app_health }}{{ . }}{{ else }}Unknown{{ end }}
{{ end }}
{{ end }}

**üéØ Business Impact Assessment:**
- Monitor application stability
- Review error patterns
- Analyze user impact
- Consider feature rollback if needed
{{ end }}

{{/* Infrastructure Alert Template */}}
{{ define "bolt.infrastructure.title" }}
üèóÔ∏è INFRASTRUCTURE: Bolt System - {{ .GroupLabels.alertname }}
{{ end }}

{{ define "bolt.infrastructure.text" }}
**üèóÔ∏è BOLT INFRASTRUCTURE ALERT**

{{ range .Alerts.Firing }}
**Infrastructure Issue:** {{ .Annotations.summary }}
**Details:** {{ .Annotations.description }}
**Affected System:** `{{ .Labels.instance }}`
**Alert Level:** {{ .Labels.severity }}
**Started:** {{ .StartsAt.Format "2006-01-02 15:04:05 UTC" }}

{{ if .Annotations.runbook_url }}**üîß Operations Runbook:** {{ .Annotations.runbook_url }}{{ end }}
{{ if .Annotations.dashboard_url }}**üìä Monitoring Dashboard:** {{ .Annotations.dashboard_url }}{{ end }}
{{ end }}

**üõ†Ô∏è Infrastructure Checklist:**
- [ ] Verify system connectivity
- [ ] Check resource availability  
- [ ] Review logs for errors
- [ ] Test backup systems
- [ ] Escalate if unresolved in 30 minutes
{{ end }}

{{/* Email HTML Template */}}
{{ define "bolt.email.html" }}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Bolt Logging Alert</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .header { background: #f4f4f4; padding: 20px; border-left: 5px solid #007cba; }
        .critical { border-left-color: #dc3545; }
        .warning { border-left-color: #ffc107; }
        .alert-box { background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .metric { background: #e9ecef; padding: 5px 10px; margin: 5px 0; border-radius: 3px; }
        .resolved { background: #d4edda; border-color: #28a745; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
        .footer { margin-top: 30px; font-size: 12px; color: #666; }
    </style>
</head>
<body>
    <div class="header {{ if eq .Status "firing" }}{{ if eq .GroupLabels.severity "critical" }}critical{{ else }}warning{{ end }}{{ else }}resolved{{ end }}">
        <h2>Bolt Logging Library Alert</h2>
        <p><strong>Alert Group:</strong> {{ .GroupLabels.alertname }}</p>
        <p><strong>Status:</strong> {{ .Status | toUpper }}</p>
        <p><strong>Time:</strong> {{ .CommonAnnotations.startsAt }}</p>
    </div>

    {{ if gt (len .Alerts.Firing) 0 }}
    <h3>üî• Firing Alerts</h3>
    {{ range .Alerts.Firing }}
    <div class="alert-box">
        <h4>{{ .Annotations.summary }}</h4>
        <p>{{ .Annotations.description }}</p>
        
        <div class="metric"><strong>Instance:</strong> {{ .Labels.instance }}</div>
        <div class="metric"><strong>Component:</strong> {{ .Labels.component }}</div>
        <div class="metric"><strong>Severity:</strong> {{ .Labels.severity }}</div>
        {{ if .Annotations.value }}<div class="metric"><strong>Current Value:</strong> {{ .Annotations.value }}</div>{{ end }}
        
        {{ if .Annotations.runbook_url }}
        <p><strong>üîß Runbook:</strong> <a href="{{ .Annotations.runbook_url }}">{{ .Annotations.runbook_url }}</a></p>
        {{ end }}
    </div>
    {{ end }}
    {{ end }}

    {{ if gt (len .Alerts.Resolved) 0 }}
    <h3>‚úÖ Resolved Alerts</h3>
    {{ range .Alerts.Resolved }}
    <div class="alert-box resolved">
        <h4>{{ .Annotations.summary }}</h4>
        <p>Resolved at {{ .EndsAt.Format "2006-01-02 15:04:05 UTC" }}</p>
    </div>
    {{ end }}
    {{ end }}

    <div class="footer">
        <p>This alert was generated by Bolt Logging Library monitoring system.</p>
        <p>For questions or issues, contact: bolt-team@example.com</p>
    </div>
</body>
</html>
{{ end }}

{{/* Webhook JSON Template */}}
{{ define "bolt.webhook.json" }}
{
  "alert_group": "{{ .GroupLabels.alertname }}",
  "status": "{{ .Status }}",
  "receiver": "{{ .Receiver }}",
  "group_key": "{{ .GroupKey }}",
  "alerts": [
    {{ range $i, $alert := .Alerts }}
    {{ if $i }},{{ end }}
    {
      "status": "{{ .Status }}",
      "labels": {
        {{ range $key, $value := .Labels }}
        "{{ $key }}": "{{ $value }}"{{ if ne $key (index (last .Labels.SortedPairs).Name) }},{{ end }}
        {{ end }}
      },
      "annotations": {
        {{ range $key, $value := .Annotations }}
        "{{ $key }}": "{{ $value }}"{{ if ne $key (index (last .Annotations.SortedPairs).Name) }},{{ end }}
        {{ end }}
      },
      "starts_at": "{{ .StartsAt }}",
      "ends_at": "{{ .EndsAt }}",
      "generator_url": "{{ .GeneratorURL }}"
    }
    {{ end }}
  ],
  "external_url": "{{ .ExternalURL }}",
  "version": "4",
  "group_labels": {
    {{ range $key, $value := .GroupLabels }}
    "{{ $key }}": "{{ $value }}"{{ if ne $key (last .GroupLabels.SortedPairs).Name }},{{ end }}
    {{ end }}
  },
  "common_labels": {
    {{ range $key, $value := .CommonLabels }}
    "{{ $key }}": "{{ $value }}"{{ if ne $key (last .CommonLabels.SortedPairs).Name }},{{ end }}
    {{ end }}
  },
  "common_annotations": {
    {{ range $key, $value := .CommonAnnotations }}
    "{{ $key }}": "{{ $value }}"{{ if ne $key (last .CommonAnnotations.SortedPairs).Name }},{{ end }}
    {{ end }}
  }
}
{{ end }}